!function(t,i,e,s){function o(i){this.settings=t.extend({},d,i),this.element=t(this.settings.content),this.id=this.settings.id,this._defaults=d,this._name=n,this.init()}var n="erpPopup",d={title:"",content:"",id:"",button:"Submit",extraClass:"",onReady:function(){},onSubmit:function(){},beforeClose:function(){}};t.extend(o.prototype,{init:function(){this.show_modal(),this.bindEvents()},bindEvents:function(){t("form.erp-modal-form","#"+this.settings.id).on("submit",t.proxy(this.formSubmit,this)),t(".erp-modal .close").on("click",t.proxy(this.closeModal,this)),t("body").on("keydown","#"+this.id,t.proxy(this.onEscapeKey,this)),t("#"+this.id).focus()},formSubmit:function(i){i.preventDefault(),t(".erp-modal-backdrop, .erp-modal").find(".erp-loader").removeClass("erp-hide"),this.settings.onSubmit.call(t(i.currentTarget),this)},show_modal:function(){if(""!==this.id&&!t("#"+this.id).length){var i=t("#erp-modal").find(".erp-modal").clone();""!==this.settings.extraClass&&i.addClass(this.settings.extraClass),i.attr("id",this.id),i.attr("tabindex",-1),i.addClass("erp-count-class"),i.find("h2").text(this.settings.title),""===this.settings.button?i.find("footer").remove():i.find(".button-primary").text(this.settings.button),i.find(".content").empty().html(this.settings.content),i.show(),t("body").append(i);var e=600*t("body").find(".erp-count-class").length,s=e-1;t("#"+this.id).css("z-index",e),t("#"+this.id).after('<div style="z-index: '+s+'" class="erp-modal-backdrop '+this.id+'"></div>'),t("."+this.id).show(),this.settings.onReady.call(i,this)}},onEscapeKey:function(t){27===t.keyCode&&this.closeModal(t)},disableButton:function(){t("button[type=submit]",".erp-modal").attr("disabled","disabled")},enableButton:function(){t("button[type=submit]",".erp-modal").removeAttr("disabled")},closeModal:function(i){void 0!==i&&i.preventDefault(),t(".erp-modal-backdrop, .erp-modal").find(".erp-loader").addClass("erp-hide"),this.settings.beforeClose.call(!1,this),t("#"+this.id).remove(),t("."+this.id).remove()},showError:function(i){t(".erp-modal-backdrop, .erp-modal").find(".erp-loader").addClass("erp-hide"),alert(i)}}),t.erpPopup=function(t){new o(t)}}(jQuery,window,document);